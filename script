-- Khai báo biến global AutoLevel
if _G.AutoLevel == nil then
    _G.AutoLevel = false -- Thiết lập giá trị mặc định cho AutoLevel
end

-- Tạo ScreenGui và ImageButton chỉ một lần
local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Name = "FloatingButtonGui"
ScreenGui.Parent = game:GetService("CoreGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Cài đặt thuộc tính cho ImageButton
ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50) -- Màu nền phù hợp với theme Fluent UI
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.1, 0, 0.1, 0) -- Vị trí mặc định, có thể thay đổi
ImageButton.Size = UDim2.new(0, 50, 0, 50) -- Kích thước của nút
ImageButton.Draggable = true -- Cho phép kéo thả
ImageButton.Image = "rbxassetid://18648609696" -- Thay bằng ID hình ảnh hợp lệ

-- Thêm góc bo tròn cho nút
UICorner.Parent = ImageButton
UICorner.CornerRadius = UDim.new(0.5, 0) -- Bo tròn góc hoàn toàn

-- Xử lý sự kiện khi người dùng nhấn nút
ImageButton.MouseButton1Down:Connect(function()
    -- Mô phỏng việc nhấn phím "End" (để thu nhỏ Fluent UI)
    local success, _ = pcall(function()
        game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.End, false, game)
    end)
end)

-- Tạo các tùy chọn vũ khí và trạng thái chọn vũ khí
local ChooseWeapon = nil
local DropdownSelectWeapon = Instance.new("TextButton")
DropdownSelectWeapon.Size = UDim2.new(0, 200, 0, 50) -- Kích thước nút chọn vũ khí
DropdownSelectWeapon.Position = UDim2.new(0.2, 0, 0.2, 0) -- Vị trí của dropdown
DropdownSelectWeapon.Parent = ScreenGui
DropdownSelectWeapon.Text = "Chọn vũ khí"

-- Lắng nghe sự thay đổi lựa chọn vũ khí
DropdownSelectWeapon.MouseButton1Click:Connect(function()
    local success, weapon = pcall(function()
        return game:GetService("Players").LocalPlayer.Backpack:FindFirstChildOfClass("Tool") -- Tìm công cụ trong ba lô
    end)
    
    if success and weapon then
        ChooseWeapon = weapon.Name
    end
end)

-- Tạo tự động tăng level nếu _G.AutoLevel là true
local function autoLevel()
    if _G.AutoLevel then
        while _G.AutoLevel do
            -- Giả lập hành động tăng level (thực hiện các hành động tự động ở đây)
            task.wait(5) -- Chờ 5 giây trước khi tăng level tiếp
        end
    end
end

-- Xử lý sự kiện khi thay đổi trạng thái AutoLevel
local AutoLevelButton = Instance.new("TextButton")
AutoLevelButton.Size = UDim2.new(0, 200, 0, 50) -- Kích thước nút AutoLevel
AutoLevelButton.Position = UDim2.new(0.2, 0, 0.3, 0) -- Vị trí của nút AutoLevel
AutoLevelButton.Parent = ScreenGui
AutoLevelButton.Text = _G.AutoLevel and "Tắt AutoLevel" or "Bật AutoLevel"

AutoLevelButton.MouseButton1Click:Connect(function()
    _G.AutoLevel = not _G.AutoLevel
    AutoLevelButton.Text = _G.AutoLevel and "Tắt AutoLevel" or "Bật AutoLevel"
    if _G.AutoLevel then
        autoLevel() -- Bắt đầu tự động tăng level
    end
end)
